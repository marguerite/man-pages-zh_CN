<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
                   "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd">
<!-- lifted from man+troff by doclifter -->
<refentry id='rpmbuild8'>
<!-- This manpage has been automatically generated by docbook2man
from a DocBook document.  This tool can be found at:
&lt;<ulink url='http://shell.ipoline.com/~elmert/comp/docbook2X/&gt;'>http://shell.ipoline.com/~elmert/comp/docbook2X/&gt;</ulink>
Please send any bug reports, improvements, comments, patches,
etc. to Steve Cheng &lt;steve@ggi&bsol;-project.org&gt;. -->
<refentryinfo><date>09 June 2002</date></refentryinfo>
<refmeta>
<refentrytitle>RPMBUILD</refentrytitle>
<manvolnum>8</manvolnum>
<refmiscinfo class='date'>09 June 2002</refmiscinfo>
<refmiscinfo class='source'>Red Hat, Inc.</refmiscinfo>
</refmeta>
<refnamediv>
<refname>rpmbuild</refname>
<refpurpose>Build RPM Package(s)</refpurpose>
</refnamediv>
<refsynopsisdiv id='synopsis'>
<synopsis>
</synopsis>
</refsynopsisdiv>

<!-- body begins here -->

<refsect1 id='building_packages'><title>BUILDING PACKAGES:</title>



<para><emphasis remap='B'>rpmbuild</emphasis> {<option>-ba|-bb|-bp|-bc|-bi|-bl|-bs</option>} [<emphasis remap='B'>rpmbuild-options</emphasis>] <emphasis remap='I'>SPECFILE</emphasis><emphasis remap='I'> ...</emphasis></para>



<para><emphasis remap='B'>rpmbuild</emphasis> {<option>-ta|-tb|-tp|-tc|-ti|-tl|-ts</option>} [<emphasis remap='B'>rpmbuild-options</emphasis>] <emphasis remap='I'>TARBALL</emphasis><emphasis remap='I'> ...</emphasis></para>



<para><emphasis remap='B'>rpmbuild</emphasis> {<option>--rebuild|--recompile</option>} <emphasis remap='I'>SOURCEPKG</emphasis><emphasis remap='I'> ...</emphasis></para>


<refsect2 id='miscellaneous'><title>MISCELLANEOUS:</title>



<para><emphasis remap='B'>rpmbuild</emphasis> <option>--showrc</option></para>

</refsect2>

<refsect2 id='rpmbuildoptions'><title>rpmbuild-options</title>



<para> [<option>--buildroot </option><emphasis remap='I'>DIRECTORY</emphasis>] [<option>--clean</option>] [<option>--nobuild</option>]
 [<option>--rmsource</option>] [<option>--rmspec</option>] [<option>--short-circuit</option>]
 [<option>--noclean</option>] [<option>--nocheck</option>]
 [<option>--target </option><emphasis remap='I'>PLATFORM</emphasis>]</para>

</refsect2>
</refsect1>

<refsect1 id='description'><title>DESCRIPTION</title>
<para><emphasis remap='B'>rpmbuild</emphasis> is used to build both binary and source software packages.
A <emphasis remap='B'>package</emphasis> consists of an archive of files and
meta-data used to install and erase the archive files. The meta-data
includes helper scripts, file attributes, and descriptive information
about the package.
<emphasis remap='B'>Packages</emphasis> come in two varieties: binary packages,
used to encapsulate software to be installed, and source packages,
containing the source code and recipe necessary to produce binary
packages.</para>

<para>One of the following basic modes must be selected:
<emphasis remap='B'>Build Package</emphasis>,
<emphasis remap='B'>Build Package from Tarball</emphasis>,
<emphasis remap='B'>Recompile Package</emphasis>,
<emphasis remap='B'>Show Configuration</emphasis>.</para>

<refsect2 id='general_options'><title>GENERAL OPTIONS</title>

<para>These options can be used in all the different modes.</para>
<variablelist remap='TP'>
  <varlistentry>
  <term><option>-?, --help</option></term>
  <listitem>
<para>Print a longer usage message then normal.</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><option>--version</option></term>
  <listitem>
<para>Print a single line containing the version number of <emphasis remap='B'>rpm</emphasis>
being used.</para> 
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><option>--quiet</option></term>
  <listitem>
<para>Print as little as possible - normally only error messages will
be displayed.</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><option>-v</option></term>
  <listitem>
<para>Print verbose information - normally routine progress messages will be
displayed.</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><option>-vv</option></term>
  <listitem>
<para>Print lots of ugly debugging information.</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><option>--rcfile </option><emphasis remap='I'>FILELIST</emphasis></term>
  <listitem>
<para>Each of the files in the colon separated
<emphasis remap='I'>FILELIST</emphasis>
is read sequentially by <emphasis remap='B'>rpm</emphasis> for configuration
information.
Only the first file in the list must exist, and tildes will be
expanded to the value of <emphasis remap='B'>$HOME</emphasis>.
The default <emphasis remap='I'>FILELIST</emphasis> is
<filename>/usr/lib/rpm/rpmrc</filename>:<filename>/usr/lib/rpm/redhat/rpmrc</filename>:<filename>/etc/rpmrc</filename>:<filename>~/.rpmrc</filename>.</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><option>--pipe </option><emphasis remap='I'>CMD</emphasis></term>
  <listitem>
<para>Pipes the output of <emphasis remap='B'>rpm</emphasis> to the file <command>CMD</command>.</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><option>--dbpath </option><emphasis remap='I'>DIRECTORY</emphasis></term>
  <listitem>
<para>Use the database in <emphasis remap='I'>DIRECTORY</emphasis> rather
than the default path <filename>/var/lib/rpm</filename></para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><option>--root </option><emphasis remap='I'>DIRECTORY</emphasis></term>
  <listitem>
<para>Use the file system tree rooted at <emphasis remap='I'>DIRECTORY</emphasis> for all operations.
Note that this means the database within
<emphasis remap='I'>DIRECTORY</emphasis>
will be used for dependency checks and any scriptlet(s) (e.g.
<emphasis remap='B'>%post</emphasis> if installing, or
<emphasis remap='B'>%prep</emphasis> if building, a package)
will be run after a chroot(2) to
<emphasis remap='I'>DIRECTORY</emphasis>.</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><option>-D, --define='</option><emphasis remap='I'>MACRO EXPR</emphasis><emphasis remap='B'>'</emphasis></term>
  <listitem>
<para>Defines <emphasis remap='I'>MACRO</emphasis> with value <emphasis remap='I'>EXPR</emphasis>.</para>
  </listitem>
  </varlistentry>
</variablelist>
</refsect2>

<refsect2 id='build_options'><title>BUILD OPTIONS</title>

<para>The general form of an rpm build command is</para> 


<para><emphasis remap='B'>rpmbuild</emphasis> <option>-b</option><replaceable>STAGE</replaceable><emphasis remap='B'>|-t</emphasis><emphasis remap='I'>STAGE</emphasis> [ <emphasis remap='B'>     rpmbuild-options
</emphasis> ] <emphasis remap='I'>FILE</emphasis><emphasis remap='I'> ...</emphasis></para>


<para>The argument used is <option>-b</option> if a spec file is being
used to build the package and <option>-t</option> if <emphasis remap='B'>rpmbuild</emphasis>
should look inside of a (possibly compressed) tar file for
the spec file to use. After the first argument, the next
character (<emphasis remap='I'>STAGE</emphasis>) specifies the stages
of building and packaging to be done and is one of:</para>
<variablelist remap='TP'>
  <varlistentry>
  <term><option>-ba</option></term>
  <listitem>
<para>Build binary and source packages (after doing the %prep, %build, and
%install stages).</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><option>-bb</option></term>
  <listitem>
<para>Build a binary package (after doing the %prep, %build, and %install
stages).</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><option>-bp</option></term>
  <listitem>
<para>Executes the "%prep" stage from the spec file. Normally this
involves unpacking the sources and applying any patches.</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><option>-bc</option></term>
  <listitem>
<para>Do the "%build" stage from the spec file (after doing the %prep stage).
This generally involves the equivalent of a "make".</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><option>-bi</option></term>
  <listitem>
<para>Do the "%install" stage from the spec file (after doing the %prep and
%build stages).  This generally involves the equivalent of a
"make install".</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><option>-bl</option></term>
  <listitem>
<para>Do a "list check".  The "%files" section from the spec file is
macro expanded, and checks are made to verify that each file
exists.</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><option>-bs</option></term>
  <listitem>
<para>Build just the source package.</para>

<para>The following options may also be used:</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><option>--buildroot </option><emphasis remap='I'>DIRECTORY</emphasis></term>
  <listitem>
<para>When building a package, override the BuildRoot tag with directory
<emphasis remap='I'>DIRECTORY</emphasis>.</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><option>--clean</option></term>
  <listitem>
<para>Remove the build tree after the packages are made.</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><option>--nobuild</option></term>
  <listitem>
<para>Do not execute any build stages. Useful for testing out spec files.</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><option>--noclean</option></term>
  <listitem>
<para>Do not execute %clean build stage even if present in spec.</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><option>--nocheck</option></term>
  <listitem>
<para>Do not execute %check build stage even if present in spec.</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><option>--nodeps</option></term>
  <listitem>
<para>Do not verify build dependencies.</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><option>--rmsource</option></term>
  <listitem>
<para>Remove the sources after the build (may also be
used standalone, e.g. "<emphasis remap='B'>rpmbuild</emphasis> <option>--rmsource foo.spec</option>").</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><option>--rmspec</option></term>
  <listitem>
<para>Remove the spec file after the build (may also be
used standalone, eg. "<emphasis remap='B'>rpmbuild</emphasis> <option>--rmspec foo.spec</option>").</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><option>--short-circuit</option></term>
  <listitem>
<para>Skip straight to specified stage (i.e., skip all stages leading
up to the specified stage).  Only valid with <option>-bc</option>, <option>-bi</option>,
and <option>-bb</option>.  Useful for local testing only.  Packages built this
way will be marked with an unsatisfiable dependency to prevent
their accidental use.</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><option>--target </option><emphasis remap='I'>PLATFORM</emphasis></term>
  <listitem>
<para>When building the package, interpret <emphasis remap='I'>PLATFORM</emphasis>
as <emphasis remap='B'>arch-vendor-os</emphasis> and set the macros
<emphasis remap='B'>%_target</emphasis>,
<emphasis remap='B'>%_target_cpu</emphasis>, and
<emphasis remap='B'>%_target_os</emphasis>
accordingly.</para>
  </listitem>
  </varlistentry>
</variablelist>
</refsect2>

<refsect2 id='rebuild_and_recompile_options'><title>REBUILD AND RECOMPILE OPTIONS</title>

<para>There are two other ways to invoke building with rpm:</para>


<para><emphasis remap='B'>rpmbuild</emphasis> <option>--rebuild|--recompile</option> <emphasis remap='I'>SOURCEPKG</emphasis><emphasis remap='I'> ...</emphasis></para>


<para>When invoked this way, <emphasis remap='B'>rpmbuild</emphasis> installs the named source
package, and does a prep, compile and install.  In addition,
<option>--rebuild</option> builds a new binary package. When the build
has completed, the build directory is removed (as in
<option>--clean</option>) and the the sources and spec file for
the package are removed.</para>
</refsect2>

<refsect2 id='showrc'><title>SHOWRC</title>

<para>The command</para>


<para><emphasis remap='B'>rpmbuild</emphasis> <option>--showrc</option></para>


<para>shows the values <emphasis remap='B'>rpmbuild</emphasis> will use for all of the
options are currently set in
<emphasis remap='I'>rpmrc</emphasis> and
<emphasis remap='I'>macros</emphasis>
configuration file(s).</para>
</refsect2>
</refsect1>

<refsect1 id='files'><title>FILES</title>

<refsect2 id='rpmrc_configuration'><title>rpmrc Configuration</title>

<literallayout remap='.nf'>
<filename>/usr/lib/rpm/rpmrc</filename>
<filename>/usr/lib/rpm/redhat/rpmrc</filename>
<filename>/etc/rpmrc</filename>
<filename>~/.rpmrc</filename>
</literallayout> <!-- .fi -->
</refsect2>

<refsect2 id='macro_configuration'><title>Macro Configuration</title>

<literallayout remap='.nf'>
<filename>/usr/lib/rpm/macros</filename>
<filename>/usr/lib/rpm/redhat/macros</filename>
<filename>/etc/rpm/macros</filename>
<filename>~/.rpmmacros</filename>
</literallayout> <!-- .fi -->
</refsect2>

<refsect2 id='temporary'><title>Temporary</title>

<para><filename>/var/tmp/rpm*</filename></para>
</refsect2>
</refsect1>

<refsect1 id='see_also'><title>SEE ALSO</title>
<literallayout remap='.nf'>
<citerefentry><refentrytitle>gendiff</refentrytitle><manvolnum>1</manvolnum></citerefentry>,
<citerefentry><refentrytitle>popt</refentrytitle><manvolnum>3</manvolnum></citerefentry>,
<citerefentry><refentrytitle>rpm</refentrytitle><manvolnum>8</manvolnum></citerefentry>,
<citerefentry><refentrytitle>rpm2cpio</refentrytitle><manvolnum>8</manvolnum></citerefentry>,
<citerefentry><refentrytitle>rpmkeys</refentrytitle><manvolnum>8</manvolnum></citerefentry>
<citerefentry><refentrytitle>rpmspec</refentrytitle><manvolnum>8</manvolnum></citerefentry>,
<citerefentry><refentrytitle>rpmsign</refentrytitle><manvolnum>8</manvolnum></citerefentry>,
</literallayout> <!-- .fi -->

<para><userinput>rpmbuild --help</userinput> - as rpm supports customizing the options via popt 
aliases it's impossible to guarantee that what's described in the manual 
matches what's available.</para>

<para><emphasis remap='B'><ulink url='http://www.rpm.org/'>http://www.rpm.org/</ulink> &lt;URL:<ulink url='http://www.rpm.org/&gt;'>http://www.rpm.org/&gt;</ulink>
</emphasis></para>
</refsect1>

<refsect1 id='authors'><title>AUTHORS</title>
<literallayout remap='.nf'>
Marc Ewing &lt;marc@redhat.com&gt;
Jeff Johnson &lt;jbj@redhat.com&gt;
Erik Troan &lt;ewt@redhat.com&gt;
</literallayout> <!-- .fi -->
</refsect1>
</refentry>

